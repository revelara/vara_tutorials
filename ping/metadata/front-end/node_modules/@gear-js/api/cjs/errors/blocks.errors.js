'use strict';

var util = require('@polkadot/util');

class GetBlockError extends Error {
    name = 'GetBlockError';
    constructor(message, hash) {
        super();
        const splittedMessage = message.split(':');
        if (util.isU8a(hash)) {
            hash = util.u8aToString(hash);
        }
        const errorCode = splittedMessage.length > 0 ? parseInt(splittedMessage[0]) : NaN;
        switch (errorCode) {
            case -32603:
                this.message = `State already discarded for block ${hash}`;
                break;
            default:
                this.message = 'Unknow error occurred';
                break;
        }
    }
}

exports.GetBlockError = GetBlockError;
